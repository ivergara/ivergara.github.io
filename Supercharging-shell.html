<!DOCTYPE html>
<html lang="en">
<head>
    <title>Supercharging the shell - On data, programming, and technology</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://ivergara.github.io/Supercharging-shell.html">

        <meta name="author" content="Ignacio Vergara Kausel" />
        <meta name="keywords" content="rust,cli,go,fuzzy finder" />




    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://ivergara.github.io/theme/css/bootstrap.cosmo.min.css" type="text/css"/>
    <link href="https://ivergara.github.io/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://ivergara.github.io/theme/css/pygments/manni.css" rel="stylesheet">
        <link href="https://ivergara.github.io/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="https://ivergara.github.io/theme/css/style.css" type="text/css"/>

        <link href="https://ivergara.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="On data, programming, and technology ATOM Feed"/>

        <link href="https://ivergara.github.io/feeds/shell.atom.xml" type="application/atom+xml" rel="alternate"
              title="On data, programming, and technology shell, ATOM Feed"/>
</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://ivergara.github.io/" class="navbar-brand">
On data, programming, and technology            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://ivergara.github.io/pages/about-me.html">
                             about&nbsp;me
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://ivergara.github.io/Supercharging-shell.html"
                       rel="bookmark"
                       title="Permalink to Supercharging the shell">
                        Supercharging the&nbsp;shell
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2019-02-11T11:00:00+01:00"> Mon 11 February 2019</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://ivergara.github.io/tag/rust.html">rust</a>
        /
	<a href="https://ivergara.github.io/tag/cli.html">cli</a>
        /
	<a href="https://ivergara.github.io/tag/go.html">go</a>
        /
	<a href="https://ivergara.github.io/tag/fuzzy-finder.html">fuzzy finder</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <h1>Supercharging the&nbsp;shell</h1>
<p>I&#8217;m not a real power user of the command line in Linux, but I tend to use it quite regularly and is my intention to improve on that. My first step to become more proficient and increase its use was to start enhancing shell experience. The first action on this regard was to move from <code>bash</code> to <code>zsh</code>. With that change I also started useing <code>oh-my-zsh</code> to manage some goodies like themes, where I tend to gravitate to use something like <code>agnoster</code> or <code>powerline9k</code> with very few&nbsp;customizations.</p>
<p>Recently, I&#8217;ve discovered new &#8220;clones&#8221; of old tools: <code>find</code>, <code>cat</code>, <code>ls</code>, and <code>grep</code>. They tend to be reimagined tools and not a complete simple clone, considering the changes of computing technology and development &#8220;culture&#8221;. From removed <span class="caps">IO</span> constrains, to the pervasive <code>.gitignore</code> file. And most importantly, in my opinion, with sane defaults providing  aready to use tool out of the box. Also, these four tools are available for Linux, Windows, and&nbsp;macOS.</p>
<p>For the four commands mentioned before, there is something in common, they&#8217;re implemented in <code>rust</code>. Personally, I have a strong bias in favor of <code>rust</code> and I&#8217;d like to learn more of it and eventually become proficient (but that&#8217;s a topic for another&nbsp;time).</p>
<h2>Replacements</h2>
<p>I want to quickly and succintly review the tools that <em>replace</em> the ones already&nbsp;mentioned.</p>
<ul>
<li>
<p><a href="https://github.com/sharkdp/fd"><code>fd</code></a> replaces <code>find</code>. This wasn&#8217;t a tool that I really used, because I never managed to understand and learn how to use it. Now, <code>fd</code> has quite some advantages, for example being faster (in most cases) and easier to use by making <code>find</code><span class="quo">&#8216;</span>s most common use pattern the default&nbsp;one.</p>
</li>
<li>
<p><a href="https://github.com/sharkdp/bat"><code>bat</code></a> is a rather modest reinterpretation of <code>cat</code>. It automatically highlights the content of the file given as input, integrates with git, and shows line numbers. Not much to say, but just a nice&nbsp;improvement.</p>
</li>
<li>
<p><a href="https://the.exa.website"><code>exa</code></a> replaces <code>ls</code>. In the website they very clearly exaplain how constraing from 1970 don&#8217;t apply anymore and a reimagined tool could be build. Again, saner default like showing human readable file sizes in the long format and has optinal git&nbsp;awareness.</p>
</li>
<li>
<p><a href="https://github.com/BurntSushi/ripgrep"><code>ripgrep</code></a> is a replacement to <code>grep</code>. When compared with similar tools in benchmarks it is consistently at the top of the pack. Ignores files based on <code>.gitignore</code> out of the&nbsp;box.</p>
</li>
</ul>
<h2>Fuzzy &#8220;finders&#8221;&nbsp;(filter)</h2>
<p>Now, what really can supercharge the command line experience is the use of fuzzy finders. The two I&#8217;ve tried are <a href="https://github.com/junegunn/fzf">&#8216;fzf&#8217;</a> and <a href="https://github.com/lotabout/skim">&#8216;skim&#8217;</a>. Both feel very similar, but <code>fzf</code> feels much more mature and works very well right out of the box where the installation already sets useful keybindings (<code>ctrl+R</code> to search the history, <code>ctrl+T</code> to recursively search and filter from the current directory). Plus it has <a href="https://github.com/junegunn/fzf#fuzzy-completion-for-bash-and-zsh">fuzzy completion for the comand line</a>. Moreover, <code>fzf</code> provides an extensive <a href="https://github.com/junegunn/fzf/wiki/examples">library of examples</a> which can be extremely&nbsp;useful.</p>
<p>Here is when the previous set of tools start to shine, since we can combine them. For example, <code>fzf</code> and <code>skim</code> can be configured to use <code>fd</code> to do the finding and then use <code>bat</code> to do highlighted&nbsp;previews.</p>
<h2>Customizations</h2>
<p>To finish, I&#8217;ll share how all of this plays out in my <code>.zshrc</code> file</p>
<div class="highlight"><pre><span></span><span class="c1"># aliases</span>
<span class="nb">alias</span> <span class="nv">ls</span><span class="o">=</span><span class="s2">&quot;exa --group-directories-first&quot;</span>
<span class="nb">alias</span> <span class="nv">cat</span><span class="o">=</span><span class="s2">&quot;bat&quot;</span>

<span class="c1"># fzf config</span>
<span class="c1"># Default command to use when input is tty</span>
<span class="nb">export</span> <span class="nv">FZF_DEFAULT_COMMAND</span><span class="o">=</span><span class="s2">&quot;fd --type f --color=always&quot;</span>
<span class="c1"># Use ctrl+o to open selected file(s) in VS Code</span>
<span class="nb">export</span> <span class="nv">FZF_DEFAULT_OPTS</span><span class="o">=</span><span class="s2">&quot;--bind=&#39;ctrl-o:execute(code {})+abort&#39;&quot;</span>
<span class="nb">export</span> <span class="nv">FZF_CTRL_T_COMMAND</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$FZF_DEFAULT_COMMAND</span><span class="s2">&quot;</span>
<span class="c1"># Using bat as previewer </span>
<span class="nb">export</span> <span class="nv">FZF_CTRL_T_OPTS</span><span class="o">=</span><span class="s2">&quot;--preview-window &#39;right:60%&#39; --preview &#39;bat --color=always --style=header,grid --line-range :300 {}&#39;&quot;</span>
<span class="c1"># Changing from ** to ~~ the trigger for autocompletion in shell</span>
<span class="nb">export</span> <span class="nv">FZF_COMPLETION_TRIGGER</span><span class="o">=</span><span class="s1">&#39;~~&#39;</span>

<span class="nb">export</span> <span class="nv">SKIM_DEFAULT_COMMAND</span><span class="o">=</span><span class="s2">&quot;rg --files || fd || find .&quot;</span>

<span class="c1"># modified from mitsuhiko dotfiles to use bat as a previewer</span>
<span class="nb">alias</span> <span class="nv">skvi</span><span class="o">=</span><span class="s1">&#39;f(){ x=&quot;$(sk --bind &quot;ctrl-p:toggle-preview&quot; --ansi --preview=&quot;bat {} --color=always&quot; --preview-window=right:60%:hidden)&quot;; [[ $? -eq 0 ]] &amp;&amp; vim &quot;$x&quot; || true }; f&#39;</span>
<span class="c1"># doing the same for VSCode</span>
<span class="nb">alias</span> <span class="nv">skvs</span><span class="o">=</span><span class="s1">&#39;f(){ x=&quot;$(sk --bind &quot;ctrl-p:toggle-preview&quot; --ansi --preview=&quot;bat {} --color=always&quot; --preview-window=right:60%:hidden)&quot;; [[ $? -eq 0 ]] &amp;&amp; code :w &quot;$x&quot; || true }; f&#39;</span>

<span class="c1"># Use fd (https://github.com/sharkdp/fd) instead of the default find</span>
<span class="c1"># command for listing path candidates.</span>
_fzf_compgen_path<span class="o">()</span> <span class="o">{</span>
  fd --hidden --follow --exclude <span class="s2">&quot;.git&quot;</span> . <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1"># Use fd to generate the list for directory completion</span>
_fzf_compgen_dir<span class="o">()</span> <span class="o">{</span>
  fd --type d --hidden --follow --exclude <span class="s2">&quot;.git&quot;</span> . <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="o">}</span>
</pre></div>


<p>I&#8217;m still experimenting on options and further tweaks, but this provided me already with a nicely working experience. Feel free to get inspired! And there are plenty of other tools out there, try them out and keep&nbsp;improving.</p>
            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'on-data-programming-and-technology'; // required: replace example with your forum shortname

            var disqus_config = function () {
                this.language = "en";

                        this.page.identifier = '2019-02-11-Supercharging-shell';
                        this.page.url = 'https://ivergara.github.io/Supercharging-shell.html';
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="http://twitter.com/ivergarak"><i class="fa fa-twitter-square fa-lg"></i> twitter</a></li>
    <li class="list-group-item"><a href="https://www.linkedin.com/in/ignaciovergara/"><i class="fa fa-linkedin-square fa-lg"></i> linkedin</a></li>
    <li class="list-group-item"><a href="http://github.com/ivergara"><i class="fa fa-github-square fa-lg"></i> github</a></li>
    <li class="list-group-item"><a href="https://stackoverflow.com/users/2244081/ignacio-vergara-kausel"><i class="fa fa-stack-overflow fa-lg"></i> stackoverflow</a></li>
    <li class="list-group-item"><a href="https://ivergara.github.io/feeds/all.atom.xml"><i class="fa fa-rss-square fa-lg"></i> rss</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2019 Ignacio Vergara Kausel
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>                <p><small>  <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en"><img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
    Content
  licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>, except where indicated otherwise.
</small></p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://ivergara.github.io/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://ivergara.github.io/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://ivergara.github.io/theme/js/respond.min.js"></script>


    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'on-data-programming-and-technology'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-109035444-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->


</body>
</html>